@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix gt: <http://rdf2h.github.io/2016/generic-rdf2h-renderers/> .
@prefix r2h: <http://rdf2h.github.io/2015/rdf2h#> .
@prefix dc: <http://dublincore.org/2012/06/14/dcelements#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix s: <http://schema.org/> .
@prefix geoch: <https://ld.geo.admin.ch/def/> .
@prefix opengis: <http://www.opengis.net/ont/geosparql#> .

<genericResource> a r2h:Renderer;
    r2h:type rdfs:Resource;
    r2h:context r2h:Default-Naked;
    r2h:javaScript """
        var prefixMappings = [{ns: "http://schema.org/", prefix: "s:"},
                        {ns: "http://www.w3.org/1999/02/22-rdf-syntax-ns#", prefix: "rdf:"},
                        {ns: "https://gont.ch/", prefix: "gont:"},
                        {ns: "http://www.w3.org/2004/02/skos/core#", prefix: "skos:"},
                        {ns: "http://www.w3.org/2002/07/owl#", prefix: "owl:"},
                        {ns: "http://dbpedia.org/resource/", prefix: "dbr:"},
                        {ns: "http://dbpedia.org/class/yago/", prefix: "yago:"},
                        {ns: "http://xmlns.com/foaf/0.1/", prefix: "foaf:"},
                        {ns: "http://www.wikidata.org/entity/", prefix: "wikidata:"},
                        {ns: "http://dbpedia.org/ontology/", prefix: "dbo:"},
                        {ns: "http://pns.org/dc/terms/", prefix: "dct:"},
                        {ns: "http://www.w3.org/2000/01/rdf-schema#", prefix: "rdfs:"}];
        function styleUri(uri) {
            var mapping = prefixMappings.find(function(mappping) {
                return uri.startsWith(mappping.ns);
            });
            if (mapping) {
                return mapping.prefix+"<b>"+uri.substring(mapping.ns.length)+"</b>";
            } else {
                return uri;
            }
        }
        var result = "";
        var predicatesArray = [];
        var nodesToRender = [];
        //should rather attach this to something specific to this RDF2h invocation
        console.log(env);
		if (!env.renderedNodesToId)  {
			env.renderedNodesToId = new Object();
		}

    """
.




[ a       <http://rdf2h.github.io/2015/rdf2h#Renderer> ;
<http://www.w3.org/2000/01/rdf-schema#comment>
        "Renders a full page, delegating to renderers in the default \n    context for the body, and to gt:HtmlHead for things like the html title" ;
<http://rdf2h.github.io/2015/rdf2h#context>
        <http://rdf2h.github.io/2016/generic-rdf2h-renderers/FullPage> ;
<http://rdf2h.github.io/2015/rdf2h#mustache>
        """
        {{{@prefix r2h: <http://rdf2h.github.io/2015/rdf2h#>}}}
        {{{@prefix gt: <http://rdf2h.github.io/2016/generic-rdf2h-Renderers/>}}}
        {{{@prefix s: <http://schema.org/>}}}
            <head>
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"/>
              <!--<link rel='stylesheet' href='http://localhost:8080/style.css' />-->
              <title>{{.}}</title>
              <style></style>
            </head>
            <body>
              <div class="ui container">
                <header>
                  <div class="ui two column stackable grid">
                    <div class="three wide middle aligned column"><img class="ui middle aligned image" src="https://www.geo.admin.ch/etc/clientlibs/cmsms-core-common/img/logo-CH.svg" onerror="this.onerror=null; this.src='https://www.geo.admin.ch/etc/clientlibs/cmsms-core-common/img/logo-CH.png'"></div>
                    <div class="ten wide column">
                      <h1>A new dress to geo.admin.ch</h1>
                      <h2 class='subheader'>Proudly turtle configurated</h2>
                    </div>
                  </div>
                </header>
                <div class="ui dividing header"></div>
                  <div class="ui segment">
                    <div class="ui vertically divided grid">
                      {{{:render . r2h:Default}}}
                    </div>
                  </div>
                </div>
            </body>""" ;
<http://rdf2h.github.io/2015/rdf2h#type>
        <http://www.w3.org/2000/01/rdf-schema#Resource>
] .

[ a       <http://rdf2h.github.io/2015/rdf2h#Renderer> ;
  <http://rdf2h.github.io/2015/rdf2h#context>
          <http://rdf2h.github.io/2015/rdf2h#Tail> ;
  <http://rdf2h.github.io/2015/rdf2h#mustache>
          "\n   {{{@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>}}}\n    {{#+rdfs:seeAlso}}\n      <div class=\"seeAlso\">\n        See also:\n        <ul>\n          {{#rdfs:seeAlso}}\n            <li>\n              <a href=\"{{{.}}}\">{{.}}</a>\n            </li>\n          {{/rdfs:seeAlso}}\n        </ul>\n      </div>\n    {{/+rdfs:seeAlso}}\n    {{#+rdfs:seeAlso<-}}\n      <div class=\"seeAlso\">\n        Inverse see also:\n        <ul>\n          {{#rdfs:seeAlso<-}}\n            <li>\n              <a href=\"{{{.}}}\">{{.}}</a>\n            </li>\n          {{/rdfs:seeAlso<-}}\n        </ul>\n      </div>\n    {{/+rdfs:seeAlso<-}}\n    " ;
  <http://rdf2h.github.io/2015/rdf2h#type>
          <http://schema.org/Article>
] .

<genericHead> a r2h:Renderer;
    r2h:type rdfs:Resource;
    r2h:context gt:HtmlHead;
    r2h:mustache """
        {{{:render . gt:HtmlTitle}}}
    """.

<genericHtmlTitle> a r2h:Renderer;
    r2h:type rdfs:Resource;
    r2h:context gt:HtmlTitle;
    r2h:mustache """
        <title>Resource: {{.}}</title>
    """.


[ a r2h:Renderer;
    r2h:type opengis:Feature ;
    r2h:context r2h:Default ;
    r2h:mustache """{{@prefix geo: <http://www.geonames.org/ontology#>}}
      {{@prefix rdf: <http://www.w3.org/2000/01/rdf-schema#>}}
      {{@prefix dc: <http://purl.org/dc/terms/>}}

      {{#+geo:countryCode}}
      <div class="two column row">
        <div class="column">
          <p>Country code:</p>
        </div>
        <div class="column">
          <p><b>{{{geo:countryCode}}}</b></p>
        </div>
      </div>
      {{/+geo:countryCode}}

      {{#+rdf:seeAlso}}
      <div class="two column row">
        <div class="column">
          <p>See also:</p>
        </div>
        <div class="column">
          <p><b>{{{rdf:seeAlso}}}</b></p>
        </div>
      </div>
      {{/+rdf:seeAlso}}

      {{#+dc:hasVersion}}
      <div class="two column row">
        <div class="column">
          <p>Has Version:</p>
        </div>
        <div class="column">
          <p><b>{{{dc:hasVersion}}}</b></p>
        </div>
      </div>
      {{/+dc:hasVersion}}
      """
] .
